bundle:
  name: core
  databricks_cli_version: ">=0.236.*"

include:
  - variables.yml
  - resources/jobs/*.yml
  - resources/schemas/*.yml
  - resources/app.yml
  - resources/volumes/*.yml
  - resources/experiments/*.yml
    
# artifacts:
#     genesis_workbench:
#       type: whl
#       build: poetry build 
#       path: library/genesis_workbench

sync:
  paths:
    - .
    - ../app
  
targets:
  dev:
    mode: development
    default: true
    variables:
      app_name: dev-${var.dev_user_prefix}-genesis-workbench
      sql_warehouse_id: 8f210e00850a2c16
    workspace:
      root_path: ${var.current_working_directory}
      host: https://adb-830292400663869.9.azuredatabricks.net
    permissions:
      - user_name: ${var.current_user}
        level: CAN_MANAGE
  prod:
    mode: production
    variables:
      app_name: genesis-workbench
    workspace:
      host: https://adb-830292400663869.9.azuredatabricks.net
      root_path: ${var.current_working_directory}
    permissions:
      - user_name: ${var.current_user}
        level: CAN_MANAGE
    run_as:
      user_name: ${var.current_user} #sp name should be used instead later.
